<!DOCTYPE html>
<html>
<head>
    <title>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 400px; margin: 50px auto; padding: 20px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; }
        input[type="text"] { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 18px; text-align: center; letter-spacing: 3px; }
        button { background: #28a745; color: white; padding: 12px; border: none; border-radius: 5px; cursor: pointer; width: 100%; font-size: 16px; }
        button:hover { background: #218838; }
        .error { color: red; margin: 15px 0; padding: 10px; background: #ffeaea; border-radius: 5px; }
        .info { background: #e7f3ff; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
        .test-hint { background: #fff3cd; padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 14px; }
    </style>
</head>
<body>
    <h1>üîê –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã</h1>
    
    <div class="info">
        <p><strong>–ó–∞–∫–∞–∑:</strong> #{{ payment.order.id }}</p>
        <p><strong>–ö–∞—Ä—Ç–∞:</strong> **** **** **** {{ payment.card_last4 }}</p>
        <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ payment.phone }}</p>
        <p>–ù–∞ –≤–∞—à—É –ø–æ—á—Ç—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</p>
        
        <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ -->
        <div class="test-hint">
            <strong>–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</strong><br>
            –ö–æ–¥: <strong>{{ payment.otp_code }}</strong><br>
            Email: {{ payment.user.email }}
        </div>
    </div>

    {% if error %}
        <div class="error">{{ error }}</div>
    {% endif %}

    <form method="post">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="otp_code">–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (6 —Ü–∏—Ñ—Ä):</label>
            <input type="text" id="otp_code" name="otp_code" 
                   placeholder="123456" maxlength="6" required
                   pattern="[0-9]{6}" title="–í–≤–µ–¥–∏—Ç–µ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥">
        </div>

        <button type="submit">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É</button>
    </form>

    <script>
        document.getElementById('otp_code').focus();
        document.getElementById('otp_code').addEventListener('input', function(e) {
            e.target.value = e.target.value.replace(/\D/g, '');
        });
    </script>
</body>
</html>
{% extends "base.html" %}
{% block title %}My Orders{% endblock %}

{% block content %}
<h2 class="mb-4">ğŸ“¦ My Orders</h2>

{% if orders %}
    <ul class="list-group">
        {% for order in orders %}
            <li class="list-group-item">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <strong>Order #{{ order.id }}</strong> â€” {{ order.get_status_display }}
                        <br><small class="text-muted">Total: {{ order.total_price }} UZS</small>
                    </div>
                    <div>
                        {% if order.status == 'pending' %}
                            <!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ Ğ´Ğ»Ñ Ğ½ĞµĞ¾Ğ¿Ğ»Ğ°Ñ‡ĞµĞ½Ğ½Ñ‹Ñ… Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² -->
                            <a href="{% url 'pay_with_card' order.id %}" class="btn btn-sm btn-success me-1">ğŸ’³ ĞšĞ°Ñ€Ñ‚Ğ¾Ğ¹</a>
                            <form method="post" action="{% url 'mark_as_paid' order.id %}" style="display:inline;">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-sm btn-warning">ğŸ’µ ĞĞ°Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ</button>
                            </form>
                        {% endif %}
                        <a href="{% url 'order_detail' order.id %}" class="btn btn-sm btn-outline-dark ms-1">View</a>
                    </div>
                </div>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <div class="alert alert-info">You have no orders yet ğŸ’¤</div>
{% endif %}
{% endblock %}